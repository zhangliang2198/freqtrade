# Freqtrade 常见问题

## 支持的市场

Freqtrade 支持现货交易，以及部分交易所的（独立）期货交易。有关支持的交易所的最新列表，请参阅[文档起始页](index.md#supported-futures-exchanges-experimental)。

### 我的机器人可以开空头寸吗？

Freqtrade 可以在期货市场开空头寸。
这需要为此目的制定策略 - 并在配置中设置 "trading_mode": "futures"。
请务必先阅读[相关文档页面](leverage.md)。

在现货市场中，您在某些情况下可以使用杠杆现货代币，它反映了反向交易对（例如 BTCUP/USD、BTCDOWN/USD、ETHBULL/USD、ETHBEAR/USD...），可以使用 Freqtrade 进行交易。

### 我的机器人可以交易期权或期货吗？

部分交易所支持期货交易。有关支持的交易所的最新列表，请参阅[文档起始页](index.md#supported-futures-exchanges-experimental)。

## 新手提示和技巧

* 在处理策略和超参数优化文件时，您应该使用像 VSCode 或 PyCharm 这样的专业代码编辑器。一个好的代码编辑器将提供语法高亮和行号，从而可以轻松找到语法错误（很可能在 Freqtrade 启动期间指出）。

## Freqtrade 常见问题

### freqtrade 可以在同一个交易对上并行开多个仓位吗？

不可以。Freqtrade 一次只会在每个交易对上开一个仓位。
但是，您可以使用 [`adjust_trade_position()`](strategy-callbacks.md#adjust-trade-position) 回调来调整未平仓头寸。

回测为此提供了一个选项 `--eps` - 但是，这只是为了突出“隐藏”信号，在实盘中不起作用。

### 机器人无法启动

使用 `freqtrade trade --config config.json` 运行机器人时显示输出 `freqtrade: command not found`。

这可能是由以下原因引起的：

* 虚拟环境未激活。
  * 运行 `source .venv/bin/activate` 以激活虚拟环境。
* 安装未成功完成。
  * 请查看[安装文档](installation.md)。

### 机器人启动，但处于停止模式

确保您在 config.json 中将 `initial_state` 配置选项设置为 `"running"`。

### 我已经等了 5 分钟，为什么机器人还没有进行任何交易？

* 根据入场策略、白名单中的币种数量、市场情况等，找到一个好的入场点可能需要数小时或数天。请耐心等待！

* 回测会大致告诉您预期会有多少笔交易 - 但这并不能保证它们会均匀地分布在时间上 - 因此您可能在一天内有 20 笔交易，而在本周余下的时间里为 0 笔。

* 这可能是由于配置错误。最好检查日志，它们通常会告诉您机器人是否只是没有收到买入信号（只有心跳消息），或者是否存在问题（日志中的错误/异常）。

### 我已经进行了 12 笔交易，为什么我的总利润是负数？

我理解您的失望，但不幸的是，12 笔交易不足以说明任何问题。如果您运行回测，您可以看到当前的算法确实让您处于盈利状态，但那是在数千笔交易之后，即使在那里，您也会在您交易了数十次甚至数百次的特定币种上出现亏损。我们当然会不断努力改进机器人，但这将**永远**是一场赌博，它应该让您每月获得适度的胜利，但您不能从几笔交易中得出太多结论。

### 我想更改配置。我可以在不终止机器人的情况下这样做吗？

是的。您可以编辑您的配置并使用 `/reload_config` 命令重新加载配置。机器人将停止，重新加载配置和策略，并使用新的配置和策略重新启动。

### 为什么我的机器人没有卖掉它买的所有东西？

这被称为“币屑”，在所有交易所都可能发生。
这是因为许多交易所从“接收货币”中扣除费用 - 所以您购买了 100 个币 - 但您只得到 99.9 个币。
由于币以整数手数交易（1 个币的步长），您不能出售 0.9 个币（或 99.9 个币） - 但您需要向下取整到 99 个币。

这不是机器人问题，在手动交易时也会发生。

虽然 freqtrade 可以处理这个问题（它会卖出 99 个币），但费用通常低于最小可交易手数（您只能交易整数个币，而不是 0.9 个币）。
将币屑（0.9 个币）留在交易所通常是有意义的，因为下次 freqtrade 购买币时，它会消耗剩余的小额余额，这次会卖掉它买的所有东西，从而慢慢减少币屑余额（虽然它很可能永远不会完全达到 0）。

在可能的情况下（例如在币安），使用交易所专用的费用货币将解决这个问题。
在币安上，您的账户中拥有 BNB 并启用“使用 BNB 支付费用”就足够了。您的 BNB 余额会慢慢减少（因为它用于支付费用） - 但您将不再遇到币屑（Freqtrade 会将费用包含在利润计算中）。
其他交易所不提供此类可能性，在这种情况下，您只能接受或转移到其他交易所。

### 我向交易所存入了更多资金，但我的机器人没有识别出来

Freqtrade 会在必要时更新交易所余额（在下订单之前）。
RPC 调用（Telegram 的 `/balance`，对 `/balance` 的 API 调用）最多每小时可以触发一次更新。

如果启用了 `adjust_trade_position`（并且机器人有符合头寸调整条件的未平仓交易） - 那么钱包将每小时刷新一次。
要强制立即更新，您可以使用 `/reload_config` - 这将重新启动机器人。

### 我想使用不完整的 K 线

Freqtrade 不会向策略提供不完整的 K 线。使用不完整的 K 线会导致重绘，从而导致策略出现“幽灵”买入，这既无法回测，也无法在事后验证。

您可以通过使用[数据提供者](strategy-customization.md#orderbookpair-maximum)的订单簿或代码方法来使用“当前”市场数据 - 但是，这在回测期间无法使用。

### 是否有设置只退出持有的交易而不执行任何新的入场？

您可以在 Telegram 中使用 `/stopentry` 命令来阻止未来的交易入场，然后使用 `/forceexit all`（卖出所有未平仓交易）。

### 我卖掉了机器人的资金，现在日志中出现错误

Freqtrade 假定它打开的交易仅通过机器人进行管理。
如果您（意外地）卖掉了机器人的资金，freqtrade 将尝试通过尝试在交易所重新查找订单来恢复。

这是一种尽力而为的方法，并非在所有情况下都有效，尤其是在使用 freqtrade 不支持的订单类型（OCO、冰山等）时，或者在处理旧交易（交易所不再提供完整的订单信息）时。
确切的限制因交易所而异 - 详细信息通常记录在交易所的 API 文档中。

### 我想在同一台机器上运行多个机器人

请查看[高级设置文档页面](advanced-setup.md#running-multiple-instances-of-freqtrade)。

### 启动机器人时出现“无法加载策略”

当机器人无法加载策略时，会显示此错误消息。
通常，您可以使用 `freqtrade list-strategies` 来列出所有可用的策略。
此命令的输出还将包括一个状态列，显示是否可以加载策略。

请检查以下内容：

* 您是否使用了正确的策略名称？策略名称区分大小写，并且必须与策略类名（而不是文件名！）对应。
* 策略是否在 `user_data/strategies` 目录中，并且文件扩展名为 `.py`？
* 在此错误之前，机器人是否显示其他警告？也许您缺少策略的某些依赖项 - 这将在日志中突出显示。
* 如果是 docker - 策略目录是否已正确挂载（检查 docker-compose 文件的 volumes 部分）？

### 我在日志中收到“缺少数据填充”消息

此消息只是一个警告，表明最新的 K 线中缺少 K 线。
根据交易所的不同，这可能表示该交易对在您使用的时间范围内没有交易 - 并且交易所只返回有交易量的 K 线。
在低交易量交易对上，这是一个相当常见的现象。

如果此问题发生在交易对列表中的所有交易对上，则可能表示最近交易所停机。请检查您交易所的公共渠道以获取详细信息。

无论原因如何，Freqtrade 都会用“空”K 线填充这些 K 线，其中开盘价、最高价、最低价和收盘价都设置为前一根 K 线的收盘价 - 并且交易量为空。在图表中，这看起来像一个 `_` - 并且与交易所通常表示 0 交易量 K 线的方式一致。

### 我收到“检测到 2 根 K 线之间的价格跳跃”

此消息是一个警告，表明 K 线的价格跳跃超过 30%。
这可能是一个迹象，表明该交易对停止了交易，并且发生了一些代币交换（例如 2021 年的 COCOS - 价格从 0.0000154 跳到 0.01621）。
此消息通常伴随着[“缺少数据填充”](#im-getting-missing-data-fillup-messages-in-the-log) - 因为此类交易对的交易通常会停止一段时间。

### 我想重置机器人的数据库

要重置机器人的数据库，您可以删除数据库（默认为 `tradesv3.sqlite` 或 `tradesv3.dryrun.sqlite`），或通过 `--db-url` 使用不同的数据库 url（例如 `sqlite:///mynewdatabase.sqlite`）。

### 我在日志中收到“交易对 xxx 的历史记录已过时”

机器人试图告诉您它收到了一个过时的最后一根 K 线（不是最后一根完整的 K 线）。
因此，Freqtrade 将不会为此交易对进行交易 - 因为根据旧信息进行交易通常不是所希望的。

此警告可能指向以下问题之一：

* 交易所停机 -> 查看您的交易所状态页面/博客/推特以获取详细信息。
* 系统时间错误 -> 确保您的系统时间正确。
* 交易量稀少的交易对 -> 在交易所网页上检查该交易对，查看您的策略使用的时间范围。如果该交易对在某些 K 线中没有任何交易量（通常用“交易量 0”条和“_”作为 K 线可视化），则该交易对在此时间范围内没有任何交易。应理想地避免这些交易对，因为它们可能会导致订单成交问题。
* API 问题 -> API 返回错误数据（这仅为完整性起见，不应在受支持的交易所发生）。

### 我在日志中收到“无法重用 xxx 的监视”消息

这是一条信息性消息，表明机器人试图使用来自 websocket 的 K 线，但交易所没有提供正确的信息。
如果 websocket 连接中断，或者该交易对在您使用的时间范围内没有任何交易发生，则可能会发生这种情况。

Freqtrade 将通过回退到 REST api 来优雅地处理此问题。
虽然这会使迭代稍微变慢（由于 REST Api 调用） - 但它不会对机器人的操作造成任何问题。

### 我收到“交易所 XXX 不支持市价单”消息，无法运行我的策略

正如消息所说，您的交易所不支持市价单，并且您已将[订单类型](configuration.md/#understand-order_types)之一设置为“market”。您的策略可能是为其他交易所编写的，并为“止损”订单设置了“市价”订单，这对于大多数支持市价单的交易所是正确且更可取的（但对于 Gate.io 则不然）。

要解决此问题，请在策略中重新定义订单类型以使用“limit”而不是“market”：

```python
    order_types = {
        ...
        "stoploss": "limit",
        ...
    }
```

如果订单类型是在您的自定义配置中而不是在策略中定义的，则应在配置文件中应用相同的修复。

### 我正在尝试启动实盘机器人，但收到 API 权限错误

诸如 `Invalid API-key, IP, or permissions for action` 之类的错误意味着它们实际所说的内容。
您的 API 密钥要么无效（复制/粘贴错误？检查配置中是否有前导/尾随空格），要么已过期，要么您运行机器人的 IP 未在交易所的 API 控制台中启用。
通常，需要“现货交易”权限（或您使用的交易所中的等效权限）。
期货通常必须专门启用。

### 如何在机器人日志中搜索某些内容？

默认情况下，机器人将其日志写入 stderr 流。这样实现是为了让您可以轻松地将机器人的诊断消息与回测、边缘和超参数优化结果、其他各种 Freqtrade 实用程序子命令的输出以及您可能已插入策略中的自定义 `print()` 的输出分开。因此，如果您需要使用 grep 实用程序搜索日志消息，则需要将 stderr 重定向到 stdout 并忽略 stdout。

* 在 unix shell 中，这通常可以像这样简单地完成：
```shell
$ freqtrade --some-options 2>&1 >/dev/null | grep 'something'
```
（注意，`2>&1` 和 `>/dev/null` 应按此顺序编写）

* Bash 解释器还支持所谓的进程替换语法，您可以使用它来 grep 日志中的字符串：
```shell
$ freqtrade --some-options 2> >(grep 'something') >/dev/null
```
或者
```shell
$ freqtrade --some-options 2> >(grep -v 'something' 1>&2)
```

* 您还可以使用 `--logfile` 选项将 Freqtrade 日志消息的副本写入文件：
```shell
$ freqtrade --logfile /path/to/mylogfile.log --some-options
```
然后像这样 grep 它：
```shell
$ cat /path/to/mylogfile.log | grep 'something'
```
甚至可以在机器人工作且日志文件增长时动态地进行：
```shell
$ tail -f /path/to/mylogfile.log | grep 'something'
```
从一个单独的终端窗口。

在 Windows 上，Freqtrade 也支持 `--logfile` 选项，您可以使用 `findstr` 命令在日志中搜索感兴趣的字符串：
```
> type \path\to\mylogfile.log | findstr "something"
```

## 超参数优化模块

### 为什么 freqtrade 不支持 GPU？

首先，大多数指标库都不支持 GPU - 因此，对于指标计算来说，几乎没有什么好处。
GPU 的改进只会应用于 pandas 原生计算 - 或您自己编写的计算。

GPU 只擅长处理数字（浮点运算）。
对于超参数优化，我们既需要数字处理（寻找下一个参数），也需要运行 python 代码（运行回测）。
因此，GPU 不太适合超参数优化的大部分部分。

因此，使用 GPU 的好处将非常有限 - 并且无法证明尝试添加 GPU 支持所带来的复杂性是合理的。

但是，如果您认为必须拥有此功能，则没有什么可以阻止您在策略中使用支持 GPU 的指标 - 但是，您可能会对这将给您带来的微薄收益（与复杂性相比）感到失望。

### 我需要多少个周期才能获得良好的超参数优化结果？

默认情况下，在没有 `-e`/`--epochs` 命令行选项的情况下调用的超参数优化只会运行 100 个周期，这意味着对您的触发器、保护等进行 100 次评估。太少了，无法找到一个好的结果（除非您非常幸运），所以您可能需要运行 10000 次或更多次。但这将需要很长时间来计算。

由于超参数优化使用贝叶斯搜索，因此运行太多周期可能不会产生更好的结果。

因此，建议一遍又一遍地运行 500-1000 个周期，直到您总共达到至少 10000 个周期（或者对结果感到满意）。您最好通过查看结果来判断 - 如果机器人不断发现更好的策略，最好继续下去。

```bash
freqtrade hyperopt --hyperopt-loss SharpeHyperOptLossDaily --strategy SampleStrategy -e 1000
```

### 为什么运行超参数优化需要很长时间？

* 使用超参数优化发现一个好的策略需要时间。研究 www.freqtrade.io、Freqtrade 文档页面，加入 Freqtrade [discord 社区](https://discord.gg/p7nuUNVfP7)。在您耐心等待世界上最先进、免费的加密货币机器人为您提供一个可能为您量身定制的黄金策略时。

* 如果您想知道为什么进行 1000 个周期可能需要 20 分钟到几天的时间，这里有一些答案：

此答案是在 0.15.1 版本发布期间编写的，当时我们有：

* 8 个触发器
* 9 个保护：假设我们从每个保护中评估 10 个值
* 1 个止损计算：假设我们也希望从中评估 10 个值

以下计算仍然非常粗略且不精确，但它会给出这个想法。仅使用这些触发器和保护，就已经有 8*10^9*10 次评估。大约总共有 800 亿次评估。
您是否进行了 100 000 次评估？恭喜，您已经完成了大约 1/100 000 的搜索空间，假设机器人从不测试相同的参数超过一次。

* 运行 1000 个超参数优化周期所需的时间取决于以下因素：可用的 cpu、硬盘、内存、时间范围、时间范围、指标设置、指标数量、超参数优化测试策略的币种数量以及由此产生的交易数量 - 在一年内可能是 650 笔交易或 100000 笔交易，具体取决于策略是旨在通过很少交易获得大利润还是旨在进行许多低利润交易。

示例：一年内 4% 的利润 650 次 vs 0.3% 的利润 10000 次。如果我们假设您将 --timerange 设置为 365 天。

示例：
`freqtrade --config config.json --strategy SampleStrategy --hyperopt SampleHyperopt -e 1000 --timerange 20190601-20200601`

## 官方渠道

Freqtrade 仅使用以下官方渠道：

* [Freqtrade discord 服务器](https://discord.gg/p7nuUNVfP7)
* [Freqtrade 文档 (https://freqtrade.io)](https://freqtrade.io)
* [Freqtrade github 组织](https://github.com/freqtrade)

与 freqtrade 项目相关的任何人都不会询问您的交易所密钥或任何其他可能使您的资金面临被利用风险的信息。
如果您被要求泄露您的交易所密钥或将资金发送到某个随机钱包，请不要遵循这些说明。

不遵守这些准则将不是 freqtrade 的责任。

## 支持政策

我们在我们的 [Discord 服务器](https://discord.gg/p7nuUNVfP7) 和通过 GitHub 问题为 Freqtrade 提供免费支持。
我们只支持最新版本（例如 2025.8）和当前的开发分支（例如 2025.9-dev）。

如果您使用的是旧版本，请按照[升级说明](updating.md)进行操作，看看您的问题是否已得到解决。

## “Freqtrade 代币”

Freqtrade 没有加密代币产品。

您在互联网上找到的引用 Freqtrade、FreqAI 或 freqUI 的代币产品必须被视为骗局，试图利用 freqtrade 的声誉谋取自己的不法利益。
